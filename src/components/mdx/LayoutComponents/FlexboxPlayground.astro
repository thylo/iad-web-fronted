---
// Composant de démonstration de Flexbox
// Permet d'expérimenter avec les propriétés flexbox
---

<div class="iad-demo" x-data="{
  flexDirection: 'row',
  justifyContent: 'flex-start',
  alignItems: 'stretch',
  flexWrap: 'nowrap',
  gap: 1,
  itemsCount: 3,
  selectedItem: 1,
  items: [
    { grow: 0, shrink: 1, basis: 'auto' },
    { grow: 0, shrink: 1, basis: 'auto' },
    { grow: 0, shrink: 1, basis: 'auto' }
  ],
  get currentItem() {
    return this.items[this.selectedItem - 1];
  }
}">
  <div class="iad-demo-header">
    <h3>Flexbox</h3>
  </div>

  <div class="iad-controls">
    
    <div class="iad-controls-grid">
      <div class="iad-control-group">
        <label>flex-direction</label>
        <select class="iad-select" x-model="flexDirection">
          <option value="row">row</option>
          <option value="row-reverse">row-reverse</option>
          <option value="column">column</option>
          <option value="column-reverse">column-reverse</option>
        </select>
      </div>

      <div class="iad-control-group">
        <label>justify-content</label>
        <select class="iad-select" x-model="justifyContent">
          <option value="flex-start">flex-start</option>
          <option value="flex-end">flex-end</option>
          <option value="center">center</option>
          <option value="space-between">space-between</option>
          <option value="space-around">space-around</option>
          <option value="space-evenly">space-evenly</option>
        </select>
      </div>

      <div class="iad-control-group">
        <label>align-items</label>
        <select class="iad-select" x-model="alignItems">
          <option value="stretch">stretch</option>
          <option value="flex-start">flex-start</option>
          <option value="flex-end">flex-end</option>
          <option value="center">center</option>
          <option value="baseline">baseline</option>
        </select>
      </div>

      <div class="iad-control-group">
        <label for="flex-wrap">flex-wrap</label>
        <select class="iad-select" id="flex-wrap" x-model="flexWrap">
          <option value="nowrap">nowrap</option>
          <option value="wrap">wrap</option>
          <option value="wrap-reverse">wrap-reverse</option>
        </select>
      </div>

      <div class="iad-control-group">
        <label>gap: <strong x-text="gap + 'rem'"></strong></label>
        <input type="range" x-model="gap" min="0" max="3" step="0.25">
      </div>
    </div>
  </div>

  <div class="iad-controls">
    <h4>Propriétés de l'item sélectionné</h4>
    
    <div class="iad-item-selector">
      <template x-for="i in 3" :key="i">
        <button 
          @click="selectedItem = i"
          :class="{ active: selectedItem === i }"
          class="iad-button"
        >
          Item <span x-text="i"></span>
        </button>
      </template>
    </div>

    <div class="iad-controls-grid">
      <div class="iad-control-group">
        <label>flex-grow: <strong x-text="currentItem.grow"></strong></label>
        <input type="range" x-model="currentItem.grow" min="0" max="5" step="1">
      </div>

      <div class="iad-control-group">
        <label>flex-shrink: <strong x-text="currentItem.shrink"></strong></label>
        <input type="range" x-model="currentItem.shrink" min="0" max="3" step="1">
      </div>

      <div class="iad-control-group">
        <label>flex-basis</label>
        <select class="iad-select" x-model="currentItem.basis">
          <option value="auto">auto</option>
          <option value="100px">100px</option>
          <option value="150px">150px</option>
          <option value="200px">200px</option>
          <option value="50%">50%</option>
        </select>
      </div>
    </div>
  </div>

  <div class="iad-visualization-area">
    <div 
      class="flex-container"
      :style="`display: flex; flex-direction: ${flexDirection}; justify-content: ${justifyContent}; align-items: ${alignItems}; flex-wrap: ${flexWrap}; gap: ${gap}rem; min-height: 300px;`"
    >
      <template x-for="(item, index) in items" :key="index">
        <div 
          class="flex-item"
          :class="{ selected: selectedItem === index + 1 }"
          @click="selectedItem = index + 1"
          :style="`flex: ${item.grow} ${item.shrink} ${item.basis};`"
        >
          <div class="item-label">Item <span x-text="index + 1"></span></div>
          <div class="item-info">
            <div x-text="`grow: ${item.grow}`"></div>
            <div x-text="`shrink: ${item.shrink}`"></div>
            <div x-text="`basis: ${item.basis}`"></div>
          </div>
        </div>
      </template>
    </div>
  </div>

  <div class="code-output">
    <p><strong>Code CSS généré :</strong></p>
    <div class="code-block">
      <div>.container &#123;</div>
      <div>  display: flex;</div>
      <div>  flex-direction: <span x-text="flexDirection"></span>;</div>
      <div>  justify-content: <span x-text="justifyContent"></span>;</div>
      <div>  align-items: <span x-text="alignItems"></span>;</div>
      <div>  flex-wrap: <span x-text="flexWrap"></span>;</div>
      <div>  gap: <span x-text="gap + 'rem'"></span>;</div>
      <div>&#125;</div>
      <div></div>
      <div>.item-<span x-text="selectedItem"></span> &#123;</div>
      <div>  flex: <span x-text="currentItem.grow"></span> <span x-text="currentItem.shrink"></span> <span x-text="currentItem.basis"></span>;</div>
      <div>&#125;</div>
    </div>
  </div>
</div>

<style>
  .flexbox-playground {
  }

  .controls-section {
    margin-bottom: 2rem;
  }

  .controls-section h4 {
    margin: 0 0 1rem 0;
    color: #2c3e50;
    font-size: 1.1rem;
  }

  .controls-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  .control-group label {
    font-size: 0.9rem;
    font-weight: 500;
    color: #555;
  }

  .control-group select,
  .control-group input[type="range"] {
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 0.25rem;
    background: white;
    cursor: pointer;
  }

  .control-group select {
    font-size: 0.9rem;
  }

  .control-group input[type="range"] {
    width: 100%;
  }

  .item-selector {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }

  .item-selector-btn {
    padding: 0.5rem 1rem;
    border: 2px solid #ddd;
    background: white;
    border-radius: 0.25rem;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s;
  }

  .item-selector-btn:hover {
    border-color: #5D5FEF;
  }

  .item-selector-btn.active {
    background: #5D5FEF;
    color: white;
    border-color: #5D5FEF;
  }

  .visualization-area {
    margin: 2rem 0;
    padding: 1.5rem;
    background: white;
    border-radius: 0.5rem;
    border: 2px dashed #ddd;
  }

  .flex-container {
    border: 2px solid #3498db;
    border-radius: 0.5rem;
    padding: 1rem;
    background: rgba(52, 152, 219, 0.05);
  }

  .flex-item {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 1rem;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    min-width: 80px;
    border: 3px solid transparent;
  }

  .flex-item:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  .flex-item.selected {
    border-color: #ffc107;
    box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.3);
  }

  .item-label {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }

  .item-info {
    font-size: 0.8rem;
    opacity: 0.9;
  }

  .item-info div {
    font-family: monospace;
  }

  .code-output {
    margin-top: 1.5rem;
    padding: 1rem;
    background: #1e1e1e;
    color: #d4d4d4;
    border-radius: 0.5rem;
    font-family: 'Monaco', 'Menlo', monospace;
    font-size: 0.85rem;
  }

  .code-output pre {
    margin: 0.5rem 0 0 0;
    overflow-x: auto;
  }

  .code-output code {
    color: #d4d4d4;
  }

  .code-output span {
    color: #4EC9B0;
  }

  .code-output strong {
    color: #ffc107;
  }
</style>
